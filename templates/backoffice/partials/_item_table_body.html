{% for item in item_list %}
<tr class="{% if forloop.counter|divisibleby:2 %}bg-gray-50{% else %}bg-white{% endif %}">
    
    <td class="px-4 py-4 text-sm font-medium text-gray-900 break-words">
        {{ item.stem|truncatechars:100 }}
    </td>
    
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ item.get_item_type_display }}
    </td>
    
    <td class="px-4 py-4 whitespace-nowrap text-sm text-gray-500">
        {% if item.in_use_count > 0 %}
            <span class="px-2.5 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"
                  title="Usado en: {{ item.exam_titles|default:'N/A' }}">
                En {{ item.in_use_count }} examen{{ item.in_use_count|pluralize }}
            </span>
        {% else %}
            <span class="px-2.5 py-0.5 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800">
                Sin usar
            </span>
        {% endif %}
    </td>
    
    <td class="px-4 py-4 whitespace-nowrap text-sm font-medium space-x-2">
        <button 
            hx-get="{% url 'backoffice:item_edit' item.pk %}"
            hx-target="#modal-content-form"
            @click="modalContent = '<div class=\'p-6 bg-white text-gray-700\'>Cargando...</div>'; modalOpen = true"
            class="px-2.5 py-1 text-xs font-medium rounded-md text-blue-700 bg-blue-100 hover:bg-blue-200 focus:outline-none">
            Editar
        </button>
        
        <button hx-post="{% url 'backoffice:item_delete' item.pk %}"
                hx-confirm="¿Borrar esta pregunta de todo el banco? Esta acción no se puede deshacer."
                class="px-2.5 py-1 text-xs font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none">
            Borrar
        </button>
    </td>
</tr>
{% empty %}
<tr>
    <td colspan="4" class="px-4 py-6 text-center text-gray-500">
        No hay preguntas en el banco que coincidan con el filtro.
    </td>
</tr>
{% endfor %}
